# Momo Store aka Пельменная №2

**Momo-store** - это проект интернет-магазина для продажи различных видов пельменей.
Приложение доступно по **https://ilexsor.ru**

<img width="900" alt="image" src="https://user-images.githubusercontent.com/9394918/167876466-2c530828-d658-4efe-9064-825626cc6db5.png">


## Архитектура приложения
**Проект состоит из 2 частей**
1. Фронт часть ./frontend написана на node.js+html+css
2. Бэк часть ./backend написана на go

Проект не использует БД
Запросы поступают через nginx на фронт приложения порт 80, 443, далее при необходимости проксируются на бэк по порту 8081
Развертывание приложения происходит автоматизировано через GitLab CI pipeline

**В проекте использются такие технологии как :**
- **Docker** (Приложение упаковано в docker образы)
- **Kubernetes** (Есть возможность развернуть в кластере с использованием Helm)
- **Nexus** (Артефакты сборок хранятся в Nexus)
- **GitLab** (Код прилодения хранится в Gitlab образы Docker Хранятся в GitLab registry)
- **SonarCube** (Используется для анализа кода на уязвимости)
- **S3 ObjectStorage** (В нем хранятся статические файлы сайта)
- 

## Проект состоит из двух репозиториев

1. https://gitlab.praktikum-services.ru/std-ext-004-43/momo-store-infrastructure отвечает за инфраструктуру и развертывание в кубернетис и на VM в облаке Yandex (Через терраформ поднимается кластер кубернетиса с нодой) В инфраструктурном репозитории также описаны Helm чарты и пайплайн для сборки
2. https://gitlab.praktikum-services.ru/std-ext-004-43/momo-store-compose - Репозиторий для развертывания приложения на VM  через Docker Compose

## Для развертывания приложения в kubernetes необходимо
1. В инфраструктурном репозитории в папке terraform/modules заполнить данные в values.yaml для подключения к кластеру
2. выполнить комманду  - terraform init
                       - terraform plan
                       - terraform apply
3. После успешного создания кластера подготовить переменные окружения в gitlab ci для деплоя
4. Закоммитить изменения в репо и отправить в gitlab
5. Запустить Pipeline, он раскатит приложение в кластере

## Для развертывания прилоджения на VM
1. Подготовить переменные окружения в gitlab
2. Запустить Pipeline



## Сборка Frontend

```bash
npm install
NODE_ENV=production VUE_APP_API_URL=http://localhost:8081 npm run serve
```

## Сборка Backend

```bash
go run ./cmd/api
go test -v ./... 
```
